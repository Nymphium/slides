\section{Free Monad}
\begin{frame}[t,fragile]
  \frametitlesec

  % e.g.) \hlinkclip{https://github.com/matijapretnar/eff} \alert{Eff}, implemented in \structure{\only<1-2>{OCaml}\only<3>{\LARGE OCaml}}

  % \begin{onlyenv}<2>
    % \begin{lstlisting}[language={[Objective]caml}]
% type 'a free =
  % | Pure: 'a !$\rightarrow$! 'a free
  % | Impure: 'arg * ('res !$\rightarrow$! 'a free) !$\rightarrow$! 'a free

% let rec (!$\gg=$!) op f =
  % match op with
  % | Pure x !$\rightarrow$! f x
  % | Impure (x, k) !$\rightarrow$!
    % Impure (x, fun y !$\rightarrow$! k y !$\gg=$! f)
    % \end{lstlisting}
  % \end{onlyenv}
  % \begin{onlyenv}<3>
    % \begin{lstlisting}[language={[Objective]caml}]
% type ('arg, 'res) operation = ..

% (* effect Decide : unit !$\rightarrow$! bool *)
% type (_, _) operation +=
  % | Decide : (unit, bool) operation

% type 'a free =
  % | Pure: 'a !$\rightarrow$! 'a free
  % | Impure:   ('arg, 'res) operation * 'arg
            % * ('res !$\rightarrow$! 'a free) !$\rightarrow$! 'a free
    % \end{lstlisting}
  % \end{onlyenv}
% \end{frame}

% \begin{frame}
  % \frametitlesec

  e.g.) \hlinkclip{https://github.com/matijapretnar/eff} \alert{Eff}, implemented in \structure{OCaml}

  \begin{table}[ht]
    \centering
    \begin{tabular}{ccc}
      \alert{Algebraic Effects}   & $\mapsto$ & \structure{Free Monad}\\\hline
      effect invocation   & $\mapsto$ & Impure \\
      % pure computation    & $\mapsto$ & Pure\\
      % 質問で答える
      continuation        & $\mapsto$ & rhs of ($\gg=$)\\
      effect handler      & $\mapsto$ & runFree
    \end{tabular}
  \end{table}
\end{frame}

\subsection*{pros}
\begin{frame}
  \frametitlesubs

  \begin{itemize}
    \item[\coloremoji{😁}] Freeの資産が使える

      \cite{pretnar2017efficient}ではequation rulesやtype-directed optimisationなどを駆使してhand-writtenなOCamlコードに肉薄するコードを生成している

  \end{itemize}
\end{frame}

\subsection*{cons}
\begin{frame}
  \frametitlesubs

  \begin{itemize}
    \item[\coloremoji{😅}] ただのFree

      HaskellのdoとかF\#のcomputation expressionなどがないと書きづらそう、ライブラリにはやや不向きか
  \end{itemize}
\end{frame}
